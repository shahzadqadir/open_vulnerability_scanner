{% extends '_base.html' %}

{% block title %}APIs List{% endblock %}

{% block content %}

<div class="container mt-5">
    {% if apis %}
        <table class="table">        
            {% for api in apis %}
                <tr>
                    <td>API Name</td>
                    <td><strong>{{ api.name }}</strong></td>
                </tr>
                <tr>
                    <td>API Key</td>
                    <td>{{ api.key }}</td>
                </tr>
                <tr>
                    <td>Client Secret</td>
                    <td>{{ api.client_secret }}</td>
                </tr>
                <tr>
                    <td>Status</td>
                    <td>{{ api.status }}</td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <a class="btn btn-outline-danger" href="{% url 'api_delete' api.id %}">Delete</a>
                        <a class="btn btn-outline-primary" href="{% url 'api_update' api.id %}">Update</a>
                    </td>
                </tr>
            {% endfor %}
        </table>
    {% else %}
        <div>
            <p style="color: red;">You don't have any APIs defined.</p>
            <div>
                <p>You can get new API Keys from Cisco using process</p>
                <ol class="mt-3">
                <li class="mt-3">Login to the api console [developer portal](https://apiconsole.cisco.com/) using your Cisco.com ID.
                    <ul><li style="color: gray;">a. If you do not have an account please register first by clicking Register next to the Sign In button.</li></ul>
                </li>
                <li class="mt-2">Click on My Apps & Keys</li>
                <li class="mt-2">Click on Register a New App</li>
                * Fill in the respective fields.
                    <ul class="mt-2">
                        <li> Application Type should be service</li>
                        <li> Grant Type should be Client Credentials</li>
                        <li> Select the Cisco PSIRT openVuln API</li>
                        <li> Agree to the terms of service.</li>
                    </ul>
                <li class="mt-2">Click on **Register**</li>
                </ol>
            </div>
        </div>
        <div class="mt-5">            
            <a class="btn btn-outline-primary" href="{% url 'api_add' %}">Add API Details</a>
        </div>
    {% endif %}
</div>

{% endblock %}